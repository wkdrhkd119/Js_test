<!DOCTYPE html>
 
<html>
<head>
    <meta charset="utf-8" />
    <title>JSON으로부터 객체 생성</title>
    <script type="text/javascript" src="../ajax/httpRequest.js"></script>
    <script type="text/javascript">
    window.onload = function() {
        // 요청 URL, 파라미터, 콜백 처리 함수, 전송 메소드 방식
        sendRequest("member_json.jsp", "", viewInfo, "GET");
    }
 
    // 응답 처리 메소드, req = Request 클래스에서 만든 XMLHttpRequest의 객체
    function viewInfo() {
        
        if (httpRequest.readyState == 4) {
            if (httpRequest.status == 200) {
                
                // JSON 표기법 문자열로 인식
               var result = eval("(" + httpRequest.responseText + ")");
            
                // code에 해당
                if (result.code == 'success') {
                
                    //data.member에 해당
                    var m = result.data.member;
                    for(i=0; i< m.length; i++){
                        alert(m[i].id + " [" + m[i].name + "] " + m[i].sno);
                    }
                } else {
                    alert("실패");
                }
            } else {
                alert("에러 발생:"+httpRequest.status);
            }
        }
    }
    </script>
</head>
<body>
</body>
</html>